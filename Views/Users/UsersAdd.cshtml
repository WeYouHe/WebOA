<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="/Content/css/font.css">
    <link rel="stylesheet" href="/Content/css/xadmin.css">
    <script src="/Content/js/jquery.min.js"></script>
    <script type="text/javascript" src="/Content/lib/layui/layui.js" charset="utf-8"></script>
    <script type="text/javascript" src="/Content/js/xadmin.js"></script>

</head>

<body>
    <div class="x-body">
        <form class="layui-form layui-form-pane layui-col-md12" id="UserAdd" name="UserAdd">
            <div class="layui-form-item">
                <label for="username" class="layui-form-label">
                    <span class="x-red">*</span>登录名
                </label>
                <input type="text" id="ROLEID" name="ROLEID" value="1" style="display:none"
                       autocomplete="off" class="layui-input">

                <input type="text" id="STATUS" name="STATUS" value="0" style="display:none"
                       autocomplete="off" class="layui-input">

                <div class="layui-input-inline">
                    <input type="text" id="NAME" name="NAME" required 
                           autocomplete="off" class="layui-input">
                </div>
                <div class="layui-form-mid layui-word-aux">
                    <span class="x-red">*</span>将会成为您唯一的登入名
                </div>
            </div>
            <div class="layui-form-item">
                <div class="layui-upload">
                    <label class="layui-form-label"><span class="x-red">*</span>头像</label>
                    <input type="text" id="PORTRAIT" value="" name="PORTRAIT" style="display:none;" placeholder="请上传图片" autocomplete="off" class="layui-input" />
                    <div class="layui-input-inline">
                        <img id="demo1"  class="layui-upload-img" style="width:200px; height:213px" />
                        <button type="button" class="layui-btn" id="uploadImg">
                            <i class="layui-icon">&#xe67c;</i>上传图片
                        </button>
                    </div>

                </div>
            </div>
            @*<div class="layui-form-item">
                <div class="layui-upload">
                    <label class="layui-form-label"><span class="x-red">*</span>头像</label>
                    <input type="text" name="PORTRAIT" id="PORTRAIT" required lay-verify="required" value="@Model." autocomplete="off" class="layui-input">
                    <div class="layui-input-inline">
                        <div class="layui-upload-list">
                            <img class="layui-upload-img" id="demo1" src="@Model.PORTRAIT " style="width:350px;height:250px;">
                            <p id="demoText"></p>
                        </div>
                        <button type="button" class="layui-btn" id="upload1" >
                            <i class="layui-icon">&#xe67c;</i>上传图片
                        </button>
                    </div>

                </div>
            </div>*@
            <div class="layui-form-item">
                <label for="phone" class="layui-form-label">
                    <span class="x-red">*</span>手机号码
                </label>
                <div class="layui-input-inline">
                    <input type="text" id="PHONE" name="PHONE" required 
                           autocomplete="off" class="layui-input">
                </div>
            </div>
            <div class="layui-form-item">
                <label for="L_email" class="layui-form-label">
                    <span class="x-red">*</span>邮箱
                </label>
                <div class="layui-input-inline">
                    <input type="text" id="EMAIL" name="EMAIL" required lay-verify="email"
                           autocomplete="off" class="layui-input">
                </div>
            </div>
            <div class="layui-form-item">
                <label class="layui-form-label"><span class="x-red">*</span>出生日期</label>
                <div class="layui-input-block">
                    <div class="layui-inline">
                        <input type="text" name="BIRTHDAY"  autocomplete="off"  placeholder="yyyy-MM-dd HH:mm:ss" class="layui-input" id="BIRTHDAY" lay-verify="birthdayVerify">
                    </div>
                </div>
            </div>
            @*<div class="layui-form-item" id="x-city">
                <label class="layui-form-label">居住地址</label>
                <div class="layui-input-inline">
                    <select name="provid" id="provid" lay-filter="provid">
                        <option value="">请选择省</option>
                    </select>
                </div>
                <div class="layui-input-inline">
                    <select name="cityid" id="cityid" lay-filter="cityid">
                        <option value="">请选择市</option>
                    </select>
                </div>
                <div class="layui-input-inline">
                    <select name="areaid" id="areaid" lay-filter="areaid">
                        <option value="">请选择县/区</option>
                    </select>
                </div>
            </div>*@
            <div class="layui-form-item">
                <label for="ADDRESS" class="layui-form-label">
                    <span class="x-red">*</span>居住地址
                </label>
                <div class="layui-input-inline">
                    <input type="text" id="ADDRESS" name="ADDRESS" required  
                           autocomplete="off" class="layui-input">
                </div>
            </div>
            <div class="layui-form-item">
                <label class="layui-form-label"><span class="x-red">*</span>部门</label>
                <div class="layui-input-block">
                    <div class="layui-inline">
                        @Html.DropDownList("DEPAR_ID", ViewBag.Depts as List<SelectListItem>, "--全部--")
                    </div>
                </div>
            </div>
            <div class="layui-form-item">
                <label class="layui-form-label"><span class="x-red">*</span>性别</label>
                <div class="layui-input-block">
                    <div class="layui-inline">
                        <input type="radio" name="SEX" id="SEX" value="男" title="男" checked>
                        <input type="radio" name="SEX" id="SEX" value="女" title="女">
                    </div>
                </div>
            </div>
            <div class="layui-form-item">
                <label for="L_pass" class="layui-form-label">
                    <span class="x-red">*</span>密码
                </label>
                <div class="layui-input-inline">
                    <input type="password" id="PASSWORD" name="PASSWORD" required lay-verify="pass"
                           autocomplete="off" class="layui-input">
                </div>
                <div class="layui-form-mid layui-word-aux">
                    6到16个字符
                </div>
            </div>
            <div class="layui-form-item">
                <label for="L_repass" class="layui-form-label">
                    <span class="x-red">*</span>确认密码
                </label>
                <div class="layui-input-inline">
                    <input type="password" id="L_repass" name="L_repass" required lay-verify="repass"
                           autocomplete="off" class="layui-input">
                </div>
            </div>
            <div class="layui-form-item">
                <button class="layui-btn" lay-filter="add" onclick="Add()" lay-submit="">增加</button>
                <button type="reset" class="layui-btn layui-btn-primary">重置</button>
            </div>
        </form>
    </div>
    <script src="/Content/js/data.js"></script>
    <script>
        //var defaults = {
        //    s1: 'provid',
        //    s2: 'cityid',
        //    s3: 'areaid'
        //};
        layui.use(['form', 'layer', 'laydate','upload'], function () {
            $ = layui.jquery;
            var form = layui.form,
             laydate = layui.laydate;
            var upload = layui.upload;
            var layer = layui.layer;
            layer = layui.layer;
            laydate.render({
                elem: '#BIRTHDAY',
                type: 'datetime',
                format: 'yyyy-MM-dd HH:mm:ss'
            });
            
            //执行实例
            upload.render({
                elem: '#uploadImg',    //注意：id为uploadImg的input的type值必须为file
                url: '/Users/UploadPhoto',  //服务器端需要定义此方法
                done: function (res) {
                    if (res.success) {
                        $("#PORTRAIT").val(res.remake); //上传成功，remark中存放着新文件存储的路径，写到input中，方便后续的保存操作。
                        $("#demo1").attr("src", res.remake);  //attr给属性赋值，预览下已经传到服务器的图片
                        layer.msg("上传成功");
                    }
                    else
                        layer.msg("上传失败:" + res.message);
                }
            });


        });
        function Add() {
            $.post("/Users/UsersAdd",  $("#UserAdd").serialize(), function (res) {
                if (res.success) {
                    alert("添加员工成功");
                } else {
                    alert("添加员工失败:" + res.message);
                }
            }, "json");
        }
    </script>
    @*<script>
        var defaults = {
            s1: 'provid',
            s2: 'cityid',
            s3: 'areaid',
            v1: null,
            v2: null,
            v3: null
        };
        var $form;
        var form;
        var $;
        layui.define(['jquery', 'form'], function () {
            $ = layui.jquery;
            form = layui.form;
            $form = $('form');
            treeSelect(defaults);
        });
        function treeSelect(config) {
            config.v1 = config.v1 ? config.v1 : 110000;
            config.v2 = config.v2 ? config.v2 : 110100;
            config.v3 = config.v3 ? config.v3 : 110101;
            $.each(threeSelectData, function (k, v) {
                appendOptionTo($form.find('select[name=' + config.s1 + ']'), k, v.val, config.v1);
            });
            form.render();
            cityEvent(config);
            areaEvent(config);
            form.on('select(' + config.s1 + ')', function (data) {
                cityEvent(data);
                form.on('select(' + config.s2 + ')', function (data) {
                    areaEvent(data);
                });
            });

            function cityEvent(data) {
                $form.find('select[name=' + config.s2 + ']').html("");
                config.v1 = data.value ? data.value : config.v1;
                $.each(threeSelectData, function (k, v) {
                    if (v.val == config.v1) {
                        if (v.items) {
                            $.each(v.items, function (kt, vt) {
                                appendOptionTo($form.find('select[name=' + config.s2 + ']'), kt, vt.val, config.v2);
                            });
                        }
                    }
                });
                form.render();
                config.v2 = $('select[name=' + config.s2 + ']').val();
                areaEvent(config);
            }
            function areaEvent(data) {
                $form.find('select[name=' + config.s3 + ']').html("");
                config.v2 = data.value ? data.value : config.v2;
                $.each(threeSelectData, function (k, v) {
                    if (v.val == config.v1) {
                        if (v.items) {
                            $.each(v.items, function (kt, vt) {
                                if (vt.val == config.v2) {
                                    $.each(vt.items, function (ka, va) {
                                        appendOptionTo($form.find('select[name=' + config.s3 + ']'), ka, va, config.v3);
                                    });
                                }
                            });
                        }
                    }
                });
                form.render();
                form.on('select(' + config.s3 + ')', function (data) { });
            }
            function appendOptionTo($o, k, v, d) {
                var $opt = $("<option>").text(k).val(v);
                if (v == d) { $opt.attr("selected", "selected") }
                $opt.appendTo($o);
            }
        }
    </script>*@
</body>

</html>